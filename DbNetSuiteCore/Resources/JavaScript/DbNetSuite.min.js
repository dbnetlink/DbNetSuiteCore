"use strict";class DbNetSuite{constructor(n){if(this.datePickerOptions={},this.element=undefined,this.eventHandlers={},this.id="",this.connectionString="",this.connectionType="SqlServer",this.culture="",this.linkedControls=[],this.initialised=!1,this.id=n,this.element=$(`#${this.id}`),this.element.addClass("dbnetsuite").addClass("cleanslate").addClass("empty"),this.checkStyleSheetLoaded(),this.element.length==0){this.error(`${this.constructor.name} container element '${this.id}' not found`);return}}bind(n,t){this.eventHandlers[n]||(this.eventHandlers[n]=[]);this.eventHandlers[n].push(t)}unbind(n,t){this.eventHandlers[n]!=null&&this.eventHandlers[n].forEach(n=>{n==t&&(n=function(){})})}checkStyleSheetLoaded(){var n;let t=!1;for(const i of document.styleSheets)i.href&&((n=i===null||i===void 0?void 0:i.href)===null||n===void 0?void 0:n.indexOf("resource.dbnetsuite?action=css"))>0&&(t=!0);t||(alert("DbNetSuite stylesheet not found. Add @DbNetSuiteCore.StyleSheet() to your Razor page. See console for details."),console.error("DbNetSuite stylesheet not found. See https://dbnetsuitecore.z35.web.core.windows.net/index.htm?context=20#DbNetSuiteCoreStyleSheet"))}addLinkedControl(n){this.linkedControls.push(n)}fireEvent(n,t=undefined){if(!this.eventHandlers[n])return!1;const i=this.eventHandlers[n];i.forEach(n=>{let i=[this];t&&(i=i.concat([t]));n.apply(window,i)})}addPanel(n,t=undefined){const i=`${this.id}_${n}Panel`;return t==null&&(t=this.element),jQuery("<div>",{id:i}).addClass(`${this.constructor.name.toLowerCase()}-${n}`).appendTo(t),$(`#${i}`)}addLoadingPanel(){this.loadingPanel=this.addPanel("loading");this.addPanel("loadingIcon",this.loadingPanel);this.loadingPanel.addClass("dbnetsuite-loading");this.loadingPanel.children().first().addClass("icon")}error(n){var t;if(((t=this.element)===null||t===void 0?void 0:t.length)==0){alert(n);return}const i=this.addPanel("error");i.addClass("dbnetsuite-error");i.html(n)}showLoader(){var n;(n=this.loadingPanel)===null||n===void 0?void 0:n.addClass("display")}hideLoader(){var n,t;(n=this.element)===null||n===void 0?void 0:n.removeClass("empty");(t=this.loadingPanel)===null||t===void 0?void 0:t.removeClass("display")}post(n,t,i=false){this.showLoader();const r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(t)};return fetch(`~/${this.constructor.name.toLowerCase()}.dbnetsuite?action=${n}`,r).then(n=>{if(this.hideLoader(),!n.ok)throw n;return i?n.blob():n.json()}).catch(n=>(n.text().then(n=>{console.error(n),this.error(n.split("\n").shift())}),Promise.reject()))}controlElement(n){return $(`#${this.controlElementId(n)}`)}controlElementId(n){return`${this.id}_${n}`}disable(n,t){this.controlElement(n).prop("disabled",t)}setInputElement(n,t){const i=this.controlElement(n);i.val(t.toString());i.width(`${t.toString().length}em`)}configureLinkedControls(n){this.linkedControls.forEach(t=>{t.configureLinkedControl(t,n)})}configureLinkedControl(n,t){if(n instanceof DbNetGrid){const i=n;i.configureLinkedGrid(i,t)}if(n instanceof DbNetCombo){const i=n;i.configureLinkedCombo(i,t)}}}DbNetSuite.DBNull="DBNull";document.addEventListener("DOMContentLoaded",function(){$.fn.button&&$.fn.button.noConflict!==undefined&&($.fn.bootstrapBtn=$.fn.button.noConflict())});