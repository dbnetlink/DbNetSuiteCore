"use strict";class LookupDialog extends Dialog{constructor(n,t){var i,r,u,f;super(n);(i=this.$dialog)===null||i===void 0?void 0:i.on("dialogopen",n=>this.dialogOpened(n));this.parent=t;(r=this.$dialog)===null||r===void 0?void 0:r.find("[button-type='apply']").on("click",()=>this.apply());(u=this.$dialog)===null||u===void 0?void 0:u.find("[button-type='cancel']").on("click",()=>this.close());this.title=(f=this.$dialog)===null||f===void 0?void 0:f.dialog("option","title")}dialogOpened(){var n;(n=this.$dialog)===null||n===void 0?void 0:n.dialog("option","width",320)}update(n,t){var i,r,u;this.$input=t;this.columnIndex=parseInt(t.attr("columnIndex"));const f=this.parent.columns.find(n=>n.index==this.columnIndex);(i=this.$dialog)===null||i===void 0?void 0:i.dialog("option","title",`${f.label} ${this.title}`);(r=this.$dialog)===null||r===void 0?void 0:r.find("div.select").html(n.html);this.$select=(u=this.$dialog)===null||u===void 0?void 0:u.find("select");this.$select.val((t===null||t===void 0?void 0:t.val()).split(",")).width(300);this.contextIsEdit()?this.$select.removeAttr("multiple"):this.$select.attr("multiple","multiple")}contextIsEdit(){var n;if((n=this.$input)!==null&&n!==void 0)return n.hasClass("dbnetedit")}apply(){var n,t,i,r,u;if(this.contextIsEdit())((n=this.$select)===null||n===void 0?void 0:n.find(":selected").length)&&((t=this.$input)===null||t===void 0?void 0:t.val((i=this.$select)===null||i===void 0?void 0:i.val()).trigger("keyup"));else{const n=(r=this.$select)===null||r===void 0?void 0:r.val();(u=this.$input)===null||u===void 0?void 0:u.val(n.join(",")).trigger("keyup")}this.close()}}