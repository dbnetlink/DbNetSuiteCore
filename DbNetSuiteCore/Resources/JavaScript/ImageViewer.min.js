"use strict";class ImageViewer extends Dialog{constructor(n){var t,i,r,u;super(n);this.fileName="";this.fileType="";this.$image=(t=this.$dialog)===null||t===void 0?void 0:t.find("img.main-image");this.$video=(i=this.$dialog)===null||i===void 0?void 0:i.find("video.main-video");this.$audio=(r=this.$dialog)===null||r===void 0?void 0:r.find("audio.main-audio");this.$download=(u=this.$dialog)===null||u===void 0?void 0:u.find("a.download-link");this.button("download").on("click",()=>this.download());this.$image.on("load",()=>this.openViewer());this.$audio.on("loadeddata",()=>this.openViewer());this.$video.on("loadeddata",()=>this.openViewer())}show(n,t,i="Image"){var f;this.fileType=i;this.$image.hide();this.$video.hide();this.$audio.hide();let r=null,u="";switch(i.toLowerCase()){case"image":u=`Image Viewer (${t})`;r=this.$image;break;case"video":u=`Video Player (${t})`;r=this.$video;break;case"audio":u=`Audio Player (${t})`;r=this.$audio}r!=null&&((f=this.$dialog)===null||f===void 0?void 0:f.dialog("option","title",u),r.show(),r.removeAttr("width").removeAttr("height").removeAttr("style"),r.parent().removeAttr("width").removeAttr("height").removeAttr("style"),r.attr("src",n),this.fileName=t)}openViewer(){var r;this.open();const i=this.fileType=="Image"?this.$image:this.$video;let n=i.width(),t=i.height();const u=Math.trunc(this.windowWidth*.8),f=Math.trunc(this.windowHeight*.8);if(n>u||t>f){const r=n/u,e=t/f;r>e?(n=Math.trunc(n/r),t=Math.trunc(t/r),i.width(n).css("height","auto")):(t=Math.round(t/e),n=Math.trunc(n/e),i.height(t).css("width","auto"))}i.parent().width(n).height(t).css("overflow","hidden");(r=this.$dialog)===null||r===void 0?void 0:r.dialog("option","width",n+10).dialog("option","height",t+110)}download(){const n=this.$download.get(0);n.href=this.$image.attr("src");n.download=this.fileName;n.click()}}