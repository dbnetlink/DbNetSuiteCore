"use strict";class ImageViewer extends Dialog{constructor(n){var t,i;super(n);this.fileName="";this.$image=(t=this.$dialog)===null||t===void 0?void 0:t.find("img.main-image");this.$download=(i=this.$dialog)===null||i===void 0?void 0:i.find("a.download-link");this.button("download").on("click",()=>this.download());this.$image.on("load",()=>this.openViewer())}show(n){this.$image.removeAttr("width").removeAttr("height").removeAttr("style");this.$image.parent().removeAttr("width").removeAttr("height").removeAttr("style");this.$image.attr("src",n.attr("src"));this.fileName=n.data("filename")}openViewer(){var i;this.open();let n=this.$image.width(),t=this.$image.height();const r=Math.trunc(this.windowWidth*.8),u=Math.trunc(this.windowHeight*.8);if(n>r||t>u){const i=n/r,f=t/u;i>f?(n=Math.trunc(n/i),t=Math.trunc(t/i),this.$image.width(n).css("height","auto")):(t=Math.round(t/f),n=Math.trunc(n/f),this.$image.height(t).css("width","auto"))}this.$image.parent().width(n).height(t).css("overflow","hidden");(i=this.$dialog)===null||i===void 0?void 0:i.dialog("option","width",n+10).dialog("option","height",t+110)}download(){const n=this.$download.get(0);n.href=this.$image.attr("src");n.download=this.fileName;n.click()}}