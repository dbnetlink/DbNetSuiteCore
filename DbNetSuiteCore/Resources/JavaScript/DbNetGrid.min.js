"use strict";var ToolbarButtonStyle,BooleanDisplayMode,MultiRowSelectLocation,GridGenerationMode;(function(n){n[n.Image=0]="Image";n[n.Text=1]="Text";n[n.ImageAndText=2]="ImageAndText"})(ToolbarButtonStyle||(ToolbarButtonStyle={})),function(n){n[n.TrueFalse=0]="TrueFalse";n[n.YesNo=1]="YesNo";n[n.Checkbox=2]="Checkbox"}(BooleanDisplayMode||(BooleanDisplayMode={})),function(n){n[n.Left=0]="Left";n[n.Right=1]="Right"}(MultiRowSelectLocation||(MultiRowSelectLocation={})),function(n){n[n.Display=0]="Display";n[n.DataTable=1]="DataTable"}(GridGenerationMode||(GridGenerationMode={}));class DbNetGrid extends DbNetSuite{constructor(n){super(n);this.autoRowSelect=!0;this.booleanDisplayMode=BooleanDisplayMode.TrueFalse;this.cellIndexCache={};this.columnName=undefined;this.columnFilters={};this.copy=!0;this.currentPage=1;this.defaultColumn=undefined;this.dragAndDrop=!0;this.export_=!0;this.fixedFilterParams={};this.fixedFilterSql="";this.fromPart="";this.frozenHeader=!1;this.googleChartOptions=undefined;this.gridGenerationMode=GridGenerationMode.Display;this.groupBy=!1;this.linkedGrids=[];this.multiRowSelect=!1;this.multiRowSelectLocation=MultiRowSelectLocation.Left;this.navigation=!0;this.nestedGrid=!1;this.optimizeForLargeDataset=!1;this.orderBy="";this.orderByDirection="asc";this.pageSize=20;this.primaryKey=undefined;this.procedureName="";this.procedureParams={};this.quickSearch=!1;this.quickSearchDelay=1e3;this.quickSearchMinChars=3;this.quickSearchToken="";this.rowSelect=!0;this.search=!0;this.searchFilterJoin="";this.searchParams=[];this.toolbarButtonStyle=ToolbarButtonStyle.Image;this.toolbarPosition="Top";this.totalPages=0;this.view=!1;this.columns=[]}initialize(){this.element&&(this.element.empty(),this.toolbarPosition=="Top"&&(this.toolbarPanel=this.addPanel("toolbar")),this.gridPanel=this.addPanel("grid"),this.toolbarPosition=="Bottom"&&(this.toolbarPanel=this.addPanel("toolbar")),this.addLoadingPanel(),this.dropIcon=this.addPanel("dropIcon",$("body")),this.dropIcon.addClass("drop-icon"),this.post("initialize",this.getRequest()).then(n=>{this.updateColumns(n),this.configureGrid(n)}).catch(()=>{}),this.initialised=!0,this.fireEvent("onInitialized"))}setColumnExpressions(...n){n.forEach(n=>{const t={columnExpression:n};this.columns.push(new GridColumn(t))})}setColumnKeys(...n){n.forEach((n,t)=>{this.columns[t].columnKey=n})}setColumnLabels(...n){let t=0;n.forEach(n=>{this.columns.length>t&&(this.columns[t].label=n,t++)})}setColumnProperty(n,t,i){if(n instanceof Array){n.forEach(n=>this.setColumnProperty(n,t,i));return}let r=this.columns.find(t=>this.matchingColumn(t,n));if(r==undefined){const t={columnExpression:n};r=new GridColumn(t,!0);this.columns.push(r)}r[t]=i}setColumnProperties(n,t){Object.keys(t).forEach(i=>{this.setColumnProperty(n,i,t[i])})}addNestedGrid(n){this.bind("onNestedClick",n);this.nestedGrid=!0}addLinkedGrid(n){this.linkedGrids.push(n)}columnIndex(n){var i;let t=this.cellIndexCache[n];return t?t:(t=-1,(i=this.gridPanel)===null||i===void 0?void 0:i.find("th[data-columnname]").get().forEach(i=>{$(i).data("columnname")&&$(i).data("columnname").toString().toLowerCase()==n.toLowerCase()&&(t=i.cellIndex,this.cellIndexCache[n]=t)}),t)}columnCell(n,t){const i=this.columnIndex(n);return i==-1?null:(t===undefined&&(t=this.selectedRow()),t.cells[i])}selectedRow(){var n;if((n=this.gridPanel)!==null&&n!==void 0)return n.find("tr.data-row.selected")[0]}selectedRows(){var n;if((n=this.gridPanel)!==null&&n!==void 0)return n.find("tr.data-row.selected")}columnValue(n,t){const i=$(t).data(n.toLowerCase());if(i!==undefined)return i;const r=this.columnCell(n,t);return r?$(r).data("value"):null}reload(){this.currentPage=1;this.getPage()}getDataArray(n){this.post("data-array",this.getRequest()).then(t=>{n(t)})}matchingColumn(n,t){var r,u,f,e,o,s;let i=!1;return((r=n.columnKey)===null||r===void 0?void 0:r.includes("."))&&(i=((f=(u=n.columnKey)===null||u===void 0?void 0:u.split(".").pop())===null||f===void 0?void 0:f.toLowerCase())==t.toLowerCase()),((o=(e=n.columnKey)===null||e===void 0?void 0:e.split(" ").pop())===null||o===void 0?void 0:o.toLowerCase())==t.toLowerCase()&&(i=!0),i||(i=((s=n.columnKey)===null||s===void 0?void 0:s.toLowerCase())==t.toLowerCase()),i}gridElement(n){return $(`#${this.gridElementId(n)}`)}gridElementId(n){return`${this.id}_${n}`}setInputElement(n,t){const i=this.gridElement(n);i.val(t.toString());i.width(`${t.toString().length}em`)}configureToolbar(n){if(n.toolbar)["First","Next","Previous","Last","Download","Copy","View","Search"].forEach(n=>this.addEventListener(`${n}Btn`));const t=this.gridElement("dbnetgrid-toolbar").find(".navigation"),i=this.gridElement("no-records-cell");this.setInputElement("Rows",n.totalRows);n.totalRows==0?(t.hide(),i.show()):(t.show(),i.hide(),this.gridElement("dbnetgrid-toolbar").find(".navigation").show(),this.setInputElement("PageNumber",n.currentPage),this.setInputElement("PageCount",n.totalPages),this.currentPage=n.currentPage,this.totalPages=n.totalPages,this.disable("FirstBtn",n.currentPage==1),this.disable("PreviousBtn",n.currentPage==1),this.disable("NextBtn",n.currentPage==n.totalPages),this.disable("LastBtn",n.currentPage==n.totalPages));this.disable("ViewBtn",n.totalRows==0);this.disable("DownloadBtn",n.totalRows==0);this.disable("CopyBtn",n.totalRows==0);this.gridElement("QuickSearch").on("keyup",n=>this.quickSearchKeyPress(n))}configureGrid(n){var t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k;if(this.toolbarPanel&&(n.toolbar&&((t=this.toolbarPanel)===null||t===void 0?void 0:t.html(n.toolbar)),this.configureToolbar(n)),this.gridGenerationMode.toString()=="DataTable"){this.configureDataTable(n.data);return}(i=this.gridPanel)===null||i===void 0?void 0:i.html(n.data);(r=this.gridPanel)===null||r===void 0?void 0:r.find("tr.filter-row :input").get().forEach(n=>{const t=$(n),i=t.width();n.nodeName=="SELECT"?t.width(i+20):i<100&&t.width(100);t.on("keyup",n=>this.columnFilterKeyPress(n))});(u=this.gridPanel)===null||u===void 0?void 0:u.find("tr.data-row").get().forEach(n=>{this.addRowEventHandlers($(n)),this.fireEvent("onRowTransform",{row:n})});this.dragAndDrop&&this.procedureName==""&&((f=this.gridPanel)===null||f===void 0?void 0:f.find("tr.header-row th").draggable({helper:"clone",cursor:"move"}).on("dragstart",(n,t)=>this.columnDragStarted(n,t)).on("dragstop",(n,t)=>this.columnDragStopped(n,t)).on("drag",(n,t)=>this.columnDrag(n,t)),(e=this.gridPanel)===null||e===void 0?void 0:e.find("tr.header-row th").droppable().on("dropover",(n,t)=>this.dragDropOver(n,t)).on("dropout",(n,t)=>this.dragDropOut(n,t)).on("drop",(n,t)=>this.dragDropped(n,t)));this.procedureName==""&&((o=this.gridPanel)===null||o===void 0?void 0:o.find("tr.header-row th").get().forEach(n=>{$(n).on("click",()=>this.handleHeaderClick($(n)))}));(s=this.gridPanel)===null||s===void 0?void 0:s.find("tr.filter-row select").get().forEach(n=>{$(n).on("change",()=>this.runColumnFilterSearch())});(h=this.gridPanel)===null||h===void 0?void 0:h.find("input.multi-select-checkbox").get().forEach(n=>{$(n).on("click",n=>this.handleRowSelectClick(n))});(c=this.gridPanel)===null||c===void 0?void 0:c.find("button.nested-grid-button").get().forEach(n=>{$(n).on("click",n=>this.openNestedGrid(n))});(l=this.gridPanel)===null||l===void 0?void 0:l.find("button.download").get().forEach(n=>{$(n).on("click",n=>this.downloadCellData(n.currentTarget,!1))});(a=this.gridPanel)===null||a===void 0?void 0:a.find("img.image").get().forEach(n=>{this.downloadCellData(n.parentElement,!0)});(v=this.gridPanel)===null||v===void 0?void 0:v.find("th[data-columnname]").get().forEach(n=>{var t;const i=$(n).data("columnname"),r=n.cellIndex;(t=this.gridPanel)===null||t===void 0?void 0:t.find("tr.data-row").get().forEach(n=>{const t=n.cells[r];this.fireEvent("onCellTransform",{cell:t,row:n,columnName:i})})});this.autoRowSelect&&((y=this.gridPanel)===null||y===void 0?void 0:y.find("tr.data-row").first().trigger("click"));const d=(p=this.gridPanel)===null||p===void 0?void 0:p.find("tr.data-row").length;if(this.fireEvent("onPageLoaded",{table:(w=this.gridPanel)===null||w===void 0?void 0:w.find("table.dbnetgrid-table")[0],rowCount:d}),this.renderChart(),this.frozenHeader){const n=(b=this.gridPanel)===null||b===void 0?void 0:b.find("tr.header-row").height(),t=(k=this.gridPanel)===null||k===void 0?void 0:k.find("tr.filter-row");t.find("th").css("top",n)}d===0&&this.linkedGrids.forEach(n=>{n.configureLinkedGrid(n,null)})}configureDataTable(n){var t,i,r,u;(t=this.element)===null||t===void 0?void 0:t.removeClass("dbnetsuite");(i=this.toolbarPanel)===null||i===void 0?void 0:i.addClass("dbnetsuite");(r=this.gridPanel)===null||r===void 0?void 0:r.html(n);(u=this.gridPanel)===null||u===void 0?void 0:u.find("table").DataTable()}renderChart(){this.googleChartOptions&&this.getDataArray(n=>this.loadChart(n))}loadChart(n){google.charts.load("current",{packages:["corechart"]});google.charts.setOnLoadCallback(()=>this.drawChart(n))}drawChart(n){var t,i;const u=google.visualization.arrayToDataTable(n),f=new google.visualization[this.googleChartOptions.type](document.getElementById(this.googleChartOptions.panelId)),r={};((t=this.googleChartOptions)===null||t===void 0?void 0:t.functionName)&&window[(i=this.googleChartOptions)===null||i===void 0?void 0:i.functionName](this,r);f.draw(u,r)}updateColumns(n){this.columns=[];n.columns.forEach(n=>{const t={columnExpression:n.columnExpression,columnName:n.columnName,label:n.label,format:n.format,foreignKey:n.foreignKey,foreignKeyValue:n.foreignKeyValue,lookup:n.lookup,style:n.style,display:n.display,filter:n.filter,filterMode:n.filterMode,groupHeader:n.groupHeader,download:n.download,image:n.image,view:n.view,dataType:n.dataType,aggregate:n.aggregate,totalBreak:n.totalBreak,clearDuplicateValue:n.clearDuplicateValue,primaryKey:n.primaryKey,index:n.index,dataOnly:n.dataOnly};this.columns.push(new GridColumn(t))})}columnDragStarted(n,t){const i=$(n.currentTarget);i.css("opacity",.5);t.helper.css("opacity",.5);t.helper.attr("dbnetgrid_id",this.id);t.helper.width(i.width()+2).height(i.height()+2)}columnDragStopped(n){const t=$(n.currentTarget);t.css("opacity",1)}columnDrag(n,t){var i,r;if(this.dropTarget&&t.helper.attr("dbnetgrid_id")==this.id){(i=this.dropIcon)===null||i===void 0?void 0:i.show();const f=this.dropTarget.width(),u=this.dropTarget.offset(),o=this.dropTarget.parent().offset(),s=t.position.left+o.left;let e=u.left-9;const h=u.top-14;t.helper.attr("dropside","left");s+f>u.left&&(t.helper.attr("dropside","right"),e+=f+4,console.log);(r=this.dropIcon)===null||r===void 0?void 0:r.css({left:`${e}px`,top:`${h}px`})}}dragDropOver(n,t){t.helper.attr("dbnetgrid_id")==this.id&&(this.dropTarget=$(n.currentTarget))}dragDropOut(){var n;(n=this.dropIcon)===null||n===void 0?void 0:n.hide();this.dropTarget=undefined}dragDropped(n,t){var r;if(t.helper.attr("dbnetgrid_id")==this.id){(r=this.dropIcon)===null||r===void 0?void 0:r.hide();const i=[],u=parseInt(t.draggable.data("columnordinal"))-1,f=parseInt($(n.currentTarget).data("columnordinal"))-1,e=this.columns[u],o=t.helper.attr("dropside");for(let n=0;n<this.columns.length;n++)n==f&&o=="left"&&i.push(e),n!=u&&i.push(this.columns[n]),n==f&&o=="right"&&i.push(e);this.columns=i;this.orderBy="";this.getPage()}}addRowEventHandlers(n){n.on("mouseover",()=>n.addClass("highlight"));n.on("mouseout",()=>n.removeClass("highlight"));n.on("click",()=>this.handleRowClick(n))}handleRowClick(n){this.rowSelect&&(n.parent().find("tr.data-row").removeClass("selected").find("input.multi-select-checkbox").prop("checked",!1),n.addClass("selected").find("input.multi-select-checkbox").prop("checked",!0));this.linkedGrids.forEach(t=>{this.configureLinkedGrid(t,n.data("id"))});this.viewDialog&&this.viewDialog.isOpen()&&this.getViewContent();this.fireEvent("onRowSelected",{row:n[0]})}handleHeaderClick(n){this.orderBy=n.data("columnordinal");const t=n.data("dbdatatype");switch(t){case"text":case"ntext":case"image":return}this.orderByDirection="asc";n.attr("orderby")&&(this.orderByDirection=n.attr("orderby")=="asc"?"desc":"asc");this.getPage()}handleRowSelectClick(n){const i=$(n.currentTarget),r=i.is(":checked");let t;i.parent().prop("tagName")=="TH"?(t=i.closest("table").find("tbody").children(),t.get().forEach(n=>$(n).find("input.multi-select-checkbox").prop("checked",r))):t=i.parent().parent("tr");r?t.addClass("selected"):t.removeClass("selected");n.stopPropagation()}handleClick(n){const t=n.target.id;switch(t){case this.gridElementId("FirstBtn"):this.currentPage=1;break;case this.gridElementId("NextBtn"):this.currentPage++;break;case this.gridElementId("PreviousBtn"):this.currentPage--;break;case this.gridElementId("LastBtn"):this.currentPage=this.totalPages;break;case this.gridElementId("DownloadBtn"):case this.gridElementId("CopyBtn"):case this.gridElementId("ViewBtn"):case this.gridElementId("SearchBtn"):break;default:return}n.preventDefault();switch(t){case this.gridElementId("DownloadBtn"):this.download();break;case this.gridElementId("CopyBtn"):this.copyGrid();break;case this.gridElementId("ViewBtn"):this.getViewContent();break;case this.gridElementId("SearchBtn"):this.openSearchDialog();break;default:this.getPage()}}quickSearchKeyPress(n){const t=n.target;window.clearTimeout(this.quickSearchTimerId);(t.value.length>=this.quickSearchMinChars||t.value.length==0||n.key=="Enter")&&(this.quickSearchTimerId=window.setTimeout(()=>{this.runQuickSearch(t.value)},this.quickSearchDelay))}columnFilterKeyPress(){window.clearTimeout(this.quickSearchTimerId);this.quickSearchTimerId=window.setTimeout(()=>{this.runColumnFilterSearch()},this.quickSearchDelay)}runQuickSearch(n){this.quickSearchToken=n;this.currentPage=1;this.getPage()}runColumnFilterSearch(){var n,t;this.columnFilters={};(n=this.gridPanel)===null||n===void 0?void 0:n.find("tr.filter-row input").get().forEach(n=>{const t=$(n);t.val()!=""&&(this.columnFilters[t.data("columnname")]=t.val().toString())});(t=this.gridPanel)===null||t===void 0?void 0:t.find("tr.filter-row select").get().forEach(n=>{const t=$(n);t.val()!=""&&(this.columnFilters[t.data("columnname")]=t.val().toString())});this.searchDialog&&(this.searchDialog.clear(),this.searchParams=[]);this.currentPage=1;this.getPage()}clearColumnFilters(){var n,t;this.columnFilters={};(n=this.gridPanel)===null||n===void 0?void 0:n.find("tr.filter-row input").get().forEach(n=>{const t=$(n);t.val("")});(t=this.gridPanel)===null||t===void 0?void 0:t.find("tr.filter-row select").get().forEach(n=>{const t=$(n);t.val("")})}getPage(n){const t=this.activeElementId();this.post("page",this.getRequest()).then(i=>{i.error==!1&&(this.configureGrid(i),this.focusActiveElement(t)),n&&n(i)})}lookup(n){const t=this.getRequest();if(t.lookupColumnIndex=parseInt(n.attr("columnIndex")),this.lookupDialog&&t.lookupColumnIndex==this.lookupDialog.columnIndex){this.lookupDialog.open();return}this.post("lookup",t).then(t=>{var i;this.lookupDialog||((i=this.element)===null||i===void 0?void 0:i.append(t.toolbar),this.lookupDialog=new LookupDialog(`${this.id}_lookup_dialog`,this));this.lookupDialog.update(t,n);this.lookupDialog.open()})}activeElementId(){var n,t;let i=undefined;return((n=document.activeElement)===null||n===void 0?void 0:n.nodeName)=="INPUT"&&(i=(t=document.activeElement)===null||t===void 0?void 0:t.id),i}focusActiveElement(n){if(n){const t=$(`#${n}`),i=t.val();t.trigger("focus").val(i);t[0].setSelectionRange(i.length,i.length)}}download(){switch(this.gridElement("DownloadSelect").val()){case"html":this.htmlExport();break;case"excel":this.downloadSpreadsheet()}}htmlExport(){this.post("html-export",this.getRequest(),!0).then(n=>{const t=window.URL.createObjectURL(n),i=window.open();i.location.href=t})}downloadSpreadsheet(){this.post("generate-spreadsheet",this.getRequest(),!0).then(n=>{const t=document.createElement("a");t.href=window.URL.createObjectURL(n);t.download=`report_${(new Date).getTime()}.xlsx`;t.click()})}getViewContent(){const n=$(this.selectedRow());this.primaryKey=n.data("id");this.post("view-content",this.getRequest()).then(t=>{var i;this.viewDialog||((i=this.element)===null||i===void 0?void 0:i.append(t.toolbar),this.viewDialog=new ViewDialog(`${this.id}_view_dialog`,this));this.viewDialog.update(t,n)})}openSearchDialog(){if(this.searchDialog){this.searchDialog.open();return}this.post("search-dialog",this.getRequest()).then(n=>{var t;(t=this.element)===null||t===void 0?void 0:t.append(n.data);this.searchDialog=new SearchDialog(`${this.id}_search_dialog`,this);this.searchDialog.open()})}copyGrid(){var n,t,i,r,u;const f=(n=this.gridPanel)===null||n===void 0?void 0:n[0].querySelector("table.dbnetgrid-table");(t=this.gridPanel)===null||t===void 0?void 0:t.find("tr.data-row.selected").addClass("unselected").removeClass("selected");try{const n=document.createRange();n.selectNode(f);(i=window.getSelection())===null||i===void 0?void 0:i.addRange(n);document.execCommand("copy");(r=window.getSelection())===null||r===void 0?void 0:r.removeRange(n)}catch(e){try{const n=f.innerHTML,t=new Blob([n],{type:"text/html"}),i=new ClipboardItem({"text/html":t});navigator.clipboard.write([i])}catch(e){alert("Copy failed");return}}(u=this.gridPanel)===null||u===void 0?void 0:u.find("tr.data-row.unselected").addClass("selected").removeClass("unselected");this.message("Copied")}message(n){const i=`${this.id}_message_dialog`,t=$(`#${i}`);t.text(n);t.attr("title","Copy");t.dialog({autoOpen:!1});t.dialog("open")}getRequest(){this.defaultColumn=this.columns.find(n=>n.columnExpression=="*");this.defaultColumn&&(this.columns=this.columns.filter(n=>n!==this.defaultColumn));return{componentId:this.id,connectionString:this.connectionString,fromPart:this.fromPart,currentPage:this.currentPage,pageSize:this.toolbarPosition=="Hidden"?-1:this.pageSize,orderBy:this.orderBy,orderByDirection:this.orderByDirection,toolbarButtonStyle:this.toolbarButtonStyle,columns:this.columns.map(n=>n),multiRowSelect:this.multiRowSelect,multiRowSelectLocation:this.multiRowSelectLocation,nestedGrid:this.nestedGrid,quickSearch:this.quickSearch,quickSearchToken:this.quickSearchToken,booleanDisplayMode:this.booleanDisplayMode,columnFilters:this.columnFilters,frozenHeader:this.frozenHeader,optimizeForLargeDataset:this.optimizeForLargeDataset,defaultColumn:this.defaultColumn,primaryKey:this.primaryKey,columnName:this.columnName,view:this.view,groupBy:this.groupBy,search:this.search,searchFilterJoin:this.searchFilterJoin,searchParams:this.searchParams,copy:this.copy,"export":this.export_,navigation:this.navigation,culture:this.culture,fixedFilterParams:this.fixedFilterParams,fixedFilterSql:this.fixedFilterSql,procedureParams:this.procedureParams,procedureName:this.procedureName,gridGenerationMode:this.gridGenerationMode}}addEventListener(n,t="click"){this.gridElement(n).on(t,n=>this.handleClick(n))}disable(n,t){this.gridElement(n).prop("disabled",t)}downloadCellData(n,t){var r,u;const e=$(n).closest("tr.view-content-row"),o=$(n),i=o.closest("td"),s=o.closest("tr");e.length?this.columnName=e.data("columnname"):(this.primaryKey=s.data("id"),this.columnName=(u=(r=this.gridPanel)===null||r===void 0?void 0:r.find("th[data-columnname]").get(i.prop("cellIndex")))===null||u===void 0?void 0:u.getAttribute("data-columnname"));const f={row:s.get(0),cell:i.get(0),extension:"xlxs",fileName:`${this.columnName}_${this.primaryKey}.xlsx`,columnName:this.columnName};t&&(f.image=i.find("img").get(0));this.fireEvent("onCellDataDownload",f);this.post("download-column-data",this.getRequest(),!0).then(n=>{if(t){const t=i.find("img");t.attr("src",window.URL.createObjectURL(n))}else{const t=document.createElement("a");t.href=window.URL.createObjectURL(n);t.download=f.fileName;t.click()}})}openNestedGrid(n){const i=$(n.currentTarget),t=i.closest("tr");if(i.hasClass("open")){i.removeClass("open");t.next().hide();return}const e=i.closest("table");if(i.addClass("open"),t.next().hasClass("nested-grid-row")){t.next().show();return}const f=e[0].insertRow(t[0].rowIndex+1);f.className="nested-grid-row";const r=f.insertCell(-1);r.className="nested-grid-cell";r.colSpan=t[0].cells.length;const u=this.eventHandlers.onNestedClick;for(let n=0;n<u.length;n++)u[n]&&this.configureNestedGrid(u[n],r,t.data("id"))}configureNestedGrid(n,t,i){const u=`dbnetgrid${(new Date).valueOf()}`;jQuery(document.createElement("div")).attr("id",u).appendTo($(t));const r=new DbNetGrid(u);r.connectionString=this.connectionString;const f=[r,this];n.apply(window,f);this.assignForeignKey(r,i);r.initialize()}configureLinkedGrid(n,t){this.assignForeignKey(n,t);n.connectionString==""&&(n.connectionString=this.connectionString);n.currentPage=1;n.initialised?n.getPage():n.initialize()}assignForeignKey(n,t){const i=n.columns.find(n=>n.foreignKey==!0);if(i==undefined){alert("No foreign key defined for nested grid");return}i.foreignKeyValue=t?t:DbNetSuite.DBNull}}