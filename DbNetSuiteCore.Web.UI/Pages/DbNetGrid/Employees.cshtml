@page
@using DbNetSuiteCore.Components;
@using DbNetSuiteCore.Enums.DbNetEdit;
@using DbNetGridEnums = DbNetSuiteCore.Enums.DbNetGrid;
@using DbNetSuiteCore.Web.UI.Enums;

@{
    DbNetGridCore employeesGrid = new DbNetGridCore("northwind", "employees")
            {
                View = true
            };

    employeesGrid.Column("ReportsTo").Lookup(new Lookup("Employees", "EmployeeId", "lastname + ',' + firstname"));
    employeesGrid.Column("Photo").Image(new ImageConfiguration("jpg"));
    employeesGrid.Column(new String[] { "photo", "notes", "photopath" }).DataOnly();
    employeesGrid.Column(new String[] { "country", "firstname", "lastname", "photo", "notes", "photopath" }).View();
    employeesGrid.Bind(DbNetGridEnums.EventType.OnConfigureBinaryData, "configureImageFileName");
    employeesGrid.Column("country").Lookup(typeof(CountryEnum), true);
    @employeesGrid.Render()
}
<script>
    function configureFormElement(sender, args) {
        if (args.columnName == "notes") {
            args.formElement.rows = 4;
            args.formElement.cols = 50;
        }
    }

    function configureImageFileName(sender, args) {
        var fileName = sender.columnValue("photopath", args.row);
        args.fileName = fileName.split('/').pop().replace(".bmp", ".jpg");
    }

    function assignFileName(sender, args) {
        sender.setColumnValue("photopath", args.fileMetaData.fileName);
    }
</script>