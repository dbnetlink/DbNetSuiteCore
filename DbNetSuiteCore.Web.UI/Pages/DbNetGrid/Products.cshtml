@page
@using DbNetSuiteCore.Enums.DbNetGrid;
@using DbNetSuiteCore.Components;

@{
	DbNetGridCore productsGrid = new DbNetGridCore("northwind", "products");
	productsGrid.Column("supplierid").Label("Supplier").Lookup(new Lookup("suppliers", "supplierid", "companyname"));
	productsGrid.Column("categoryid").Label("Catgeory").Lookup(new Lookup("categories", "categoryid", "categoryname"));
	productsGrid.Column("discontinued").DataType(typeof(Boolean));
	productsGrid.Column("unitprice").Format("c");
	productsGrid.Bind(EventType.OnRowTransform, "highlightOrderLevels");
	productsGrid.Bind(EventType.OnViewRecordSelected, "highlightViewOrderLevels");
	productsGrid.View = true;
	productsGrid.ViewLayoutColumns = 2;
	@productsGrid.Render()
}
<script type="text/javascript" class="source">
	function highlightOrderLevels(sender, args) {
		var unitsInStock = parseInt(sender.columnValue("UnitsInStock", args.row));
		var reorderLevel = parseInt(sender.columnValue("ReorderLevel", args.row));

		if (unitsInStock < reorderLevel) {
			$(args.row).css("backgroundColor", "#F2D7D5").css("color", "#CD6155");
			$(args.row.cells[sender.columnIndex("UnitsInStock")]).css("backgroundColor", "#CD6155").css("color", "#F2D7D5");
			$(args.row.cells[sender.columnIndex("ReorderLevel")]).css("backgroundColor", "#CD6155").css("color", "#F2D7D5");
		}
	}

	function highlightViewOrderLevels(sender, args) {
		var unitsInStock = parseInt(sender.columnValue("UnitsInStock", args.row));
		var reorderLevel = parseInt(sender.columnValue("ReorderLevel", args.row));

		if (unitsInStock < reorderLevel) {
			$(sender.viewElement("UnitsInStock")).css("backgroundColor", "#CD6155").css("color", "#F2D7D5");
			$(sender.viewElement("ReorderLevel")).css("backgroundColor", "#CD6155").css("color", "#F2D7D5");
		}

		$(sender.viewElement("productname")).css("whiteSpace", "nowrap")
		$(sender.viewElement("supplierid")).css("whiteSpace", "nowrap")
		$(sender.viewElement("categoryid")).css("whiteSpace", "nowrap")
	}
</script>