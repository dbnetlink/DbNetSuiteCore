@page
@using DbNetSuiteCore.Components;
@using DbNetSuiteCore.Enums.DbNetGrid;
@using DbNetSuiteCore.Enums;
@using DbNetEditEnums = DbNetSuiteCore.Enums.DbNetEdit;
@{

    DbNetGridCore ordersGrid = new DbNetGridCore("northwind", "orders")
    {
        Columns = new List<string> { "OrderID", "CustomerID", "EmployeeID", "OrderDate", "RequiredDate", "ShippedDate", "Freight", "ShipVia" },
        Insert = true,
        QuickSearch = true,
        Delete = true,
        Update = true
    };

    ordersGrid.SetColumnAsForeignKey("CustomerID");
    ordersGrid.SetColumnLookup("EmployeeID", new Lookup("Employees", "EmployeeId", "lastname + ',' + firstname"));
    ordersGrid.SetColumnLookup("ShipVia", new Lookup("Shippers", "ShipperId", "CompanyName"));
    ordersGrid.SetColumnFormat("Freight", "c");
    ordersGrid.SetColumnLabel("EmployeeID", "Employee");

    DbNetEditCore customersEdit = new DbNetEditCore("northwind", "customers")
    {
        Columns = new List<string> { "CustomerID", "CompanyName", "Address", "City" },
        Insert = true,
        QuickSearch = true,
        Delete = true
    };

    customersEdit.SetColumnHidden("CustomerID");
    customersEdit.AddLinkedControl(ordersGrid);

    @customersEdit.Render()
}
